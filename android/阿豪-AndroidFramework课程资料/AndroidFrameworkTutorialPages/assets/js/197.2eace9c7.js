(window.webpackJsonp=window.webpackJsonp||[]).push([[197],{619:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("本文基于 android-10.0.0_r41 版本讲解")]),s._v(" "),a("h2",{attrs:{id:"_1-概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-概述"}},[s._v("#")]),s._v(" 1. 概述")]),s._v(" "),a("p",[s._v("在 Android 中，一个具体的事情可以被看作是一个任务（Task），比如：")]),s._v(" "),a("ul",[a("li",[s._v("打开微信支付二维码付款")]),s._v(" "),a("li",[s._v("打开抖音刷短视频")]),s._v(" "),a("li",[s._v("打开拼多多网购")])]),s._v(" "),a("p",[s._v("一个 Task 又可以被细分成多个子步骤，每个子步骤就是一个 Activity。这个 Activity 既可以是当前 App 中的 Activity，也可以是其他 App 中的的 Activity。比如你在微信群收到了一个 markdown 文件，微信本身是不支持读写 markdown 文件的，当你点击这个文件时，微信会弹出一个小窗口让你选择其他 App 打开这个 markdown 文件。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240110164554.png",alt:"20240110164554"}})]),s._v(" "),a("p",[s._v("当我们点击任意一个图标后，就进入到其他 App 的 Activity 中了。")]),s._v(" "),a("p",[s._v("这种基于组件的设计，弱化了进程的概念，通过重用 Activity 可以节省一定的开销，同时也为用户提供了一致的界面和用户体验。即使有很多个 Activity 分别都是来自于不同的 App，Android 系统仍然可以将它们无缝地结合到一起。")]),s._v(" "),a("h2",{attrs:{id:"_2-内部数据结构分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-内部数据结构分析"}},[s._v("#")]),s._v(" 2. 内部数据结构分析")]),s._v(" "),a("p",[s._v("那么 Android 是怎么实现的呢？我们接下来通过 Android 内部相关数据结构的解析来了解一二。")]),s._v(" "),a("h3",{attrs:{id:"_2-1-activityrecord"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-activityrecord"}},[s._v("#")]),s._v(" 2.1 ActivityRecord")]),s._v(" "),a("p",[s._v("在 Android 系统的 SystemServer 端，使用 ActivityRecord 对象来记录一个 Activity 相关的信息：")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityRecord")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConfigurationContainer")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 配置信息")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityInfo")]),s._v(" info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// AndroidManifest.xml 中提供的信息")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" packageName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// the package implementing intent's component")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" processName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// process where this component wants to run")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" taskAffinity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// as per ActivityInfo.taskAffinity")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" labelRes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// the label information from the package mgr.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" icon"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// resource identifier of activity's icon.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" logo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("               "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// resource identifier of activity's logo.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" theme"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// resource identifier of activity's theme.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 启动时基本信息")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" launchedFromPid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// always the pid who started the activity.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" launchedFromUid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// always the uid who started the activity.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" mUserId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("          "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Which user is this running for?")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Intent")]),s._v(" intent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// the original intent that generated us")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ComponentName")]),s._v(" mActivityComponent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// the intent component, or target of an alias.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" processName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// process where this component wants to run")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 运行状态信息")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityState")]),s._v(" mState"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// current state we are in")]),s._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// // frameworks/base/services/core/java/com/android/server/wm/ActivityStack.java")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// enum ActivityState {")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     INITIALIZING,")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     RESUMED,")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     PAUSING,")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     PAUSED,")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     STOPPING,")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     STOPPED,")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     FINISHING,")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     DESTROYING,")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     DESTROYED,")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//     RESTARTING_PROCESS")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// }")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" idle"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// has the activity gone idle?")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" stopped"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// is activity pause finished?")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" finishing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// activity in pending finish list?")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 管理对象")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 管理 Activity 的 ATMS 对象")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityTaskManagerService")]),s._v(" mAtmService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// owner")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这个对象用于在多个进程中标识 Activity，后面会单独来讲")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IApplicationToken"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Stub")]),s._v(" appToken"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// window manager token")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// activity 所在的 task")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TaskRecord")]),s._v(" task"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// the task this is in.")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// .....")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br")])]),a("p",[s._v("ActivityRecord 对象中主要记录了四类信息：")]),s._v(" "),a("ul",[a("li",[s._v("配置信息：这些配置信息大多来自应用中的 "),a("code",[s._v("AndroidManifest.xml")]),s._v(",比如：属于哪个 Package，所在的进程名称、任务名、组件类名、logo、主题等等，这些信息基本上是固定的")]),s._v(" "),a("li",[s._v("启动时基本信息：启动 Activity 时，才确定的信息，在每次启动时可能会不同，如 launchedFromPid、task、launchedFromPackage、processName 等")]),s._v(" "),a("li",[s._v("运行状态信息：记录 activity 当前状态的信息，比如 mState、idle、stopped、finishing 等")]),s._v(" "),a("li",[s._v("管理对象：管理当前 ActivityRecord 的对象")])]),s._v(" "),a("h3",{attrs:{id:"_2-2-taskrecord"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-taskrecord"}},[s._v("#")]),s._v(" 2.2 TaskRecord")]),s._v(" "),a("p",[s._v("在 Android 系统源码中，使用 TaskRecord 对象来描述一个任务（Task）：")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TaskRecord")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConfigurationContainer")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" taskId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Unique identifier for this task.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" affinity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// The affinity name for this task, or null; may change identity.")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** List of all activities in the task arranged in history order */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityRecord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" mActivities"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** Current stack. Setter must always be used to update the value. */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityStack")]),s._v(" mStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("TaskRecord 主要成员有：")]),s._v(" "),a("ul",[a("li",[s._v("taskid：任务的 id")]),s._v(" "),a("li",[s._v("ArrayList<ActivityRecord> mActivities：mActivities 用于存储和管理 task 中的 Activity。")]),s._v(" "),a("li",[s._v("private ActivityStack mStack：表示当前 TaskRecord 所属的 ActivityStack。系统运行过程中有很多 TaskRecord，ActivityStack 类用于管理组织这些 TaskRecord。")]),s._v(" "),a("li",[s._v("String affinity：Activity 在 "),a("code",[s._v("AndroidManifest.xml")]),s._v(" 文件中有一个 "),a("code",[s._v("android:taskAffinity=“xxx”")]),s._v(" 属性，taskAffinity 属性值相同的 ActivityRecord 会保存在同一个 TaskRecord 中")])]),s._v(" "),a("p",[s._v("TaskRecord 中有一个 ActivityRecord 的集合 mActivities，它是以 Stack 的方式来管理其中的 ActivityRecord 的，先启动的 Activity 放到栈底，后启动的 Activity 作为栈顶成员。Android 开发中常说的返回栈就是 TaskRecord 对象。")]),s._v(" "),a("p",[s._v("系统启动的最后阶段会启动 Launcher App，Launcher App 在打开主 Activity 的过程中会创建一个新 TaskRecord 对象，同时创建主 Activity 对应的 ActivityRecord 对象，并将其插入 TaskRecord 内部的栈。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240112130812.png",alt:"20240112130812"}})]),s._v(" "),a("p",[s._v("当我们在 Launcher 页面第一次打开一个 App 时，系统会创建一个新 TaskRecord 对象，同时创建 App 主 Activity 对应的 ActivityRecord 对象，并将其插入 TaskRecord 内部的栈。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240112142611.png",alt:"20240112142611"}})]),s._v(" "),a("p",[s._v("我们在主 Activity 中启动当前应用中的另一个 Activity 时（这个 Activity 没有设置 taskAffinity），系统会把新 Activity 对应的 ActivityRecord 插入到栈顶并获得焦点。前一个 ActivityRecord 仍保留在栈中，但对应的 Activity 会被停止，所谓停止就是回调 Activity 的 onPause onStop 回调方法。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240112143111.png",alt:"20240112143111"}})]),s._v(" "),a("p",[s._v("当用户执行返回操作时，当前的 Activity 对应的 ActivityRecord 会从栈顶部弹出并销毁。前一个 ActivityRecord 恢复到栈顶，对应的 Activity 将恢复，恢复到之前的状态，这里的恢复就是执行其 onRestart onStart onResume 回调。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240112143423.png",alt:"20240112143423"}})]),s._v(" "),a("p",[s._v("一般情况下，同一时间，系统中会存在多个 Task，当前显示的 Activity 所在的 Task，我们称之为前台 Task（前台 Task 的栈顶成员会显示在屏幕上），其余均为后台 Task")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240112143721.png",alt:"20240112143721"}})]),s._v(" "),a("p",[s._v("Android 系统只支持一个处于前台的 Task，用户可以一次将整个 Task 挪到后台或置为前台，在前后台转换的过程中，Task 内部 Activity 保持顺序不变。常见的转换场景有：")]),s._v(" "),a("ul",[a("li",[s._v("当用户在 Launcher 页面上点击了一个 App 的图标时，这个应用对应的 TaskRecord 就会被转移到前台。")]),s._v(" "),a("li",[s._v("如果用户一直地按 Back 键，这样返回栈中的 Activity 会一个个地被移除，直到最终返回到主屏幕，Launcher 中的 TaskRecord 会被转移到前台。当返回栈中所有的 ActivityRecord 都被移除掉的时候，对应的 TaskRecord 也就不存在了。")]),s._v(" "),a("li",[s._v("用过 Android 手机的同学应该知道，按键最近任务键（或者是对应的上划手势），系统会弹出近期 Task 列表，使用户能快速在多个 Task 间切换。")])]),s._v(" "),a("p",[s._v("如果用户长时间离开任务，系统会清除任务中除根 Activity 之外的所有 Activity。当用户返回任务时，仅恢复根 Activity。系统基于这样以下假设：在长时间过后，用户放弃了之前执行的操作，并返回任务开始执行新的操作")]),s._v(" "),a("p",[s._v("TaskRecord 中的第一个 ActivityRecord 对象被称为"),a("code",[s._v("根 Activity")]),s._v("，TaskRecord 有一个 taskAffinity 属性，可以理解为 TaskRecord 的名字，这个属性值来自根 Activity 的 taskAffinity 属性值，Activity 可以通过 "),a("code",[s._v("AndroidManifest.xml")]),s._v(" 中的 Activity 标签的 "),a("code",[s._v("android:taskAffinity=“xxx”")]),s._v(" 属性来指定其 Affinity 属性值。如果没有指定，Activity 的 taskAffinity 缺省使用包名。所以，同一个应用中所有的 Activity 的 taskAffinity 属性值默认都是相同的，都是包名。")]),s._v(" "),a("p",[s._v("假设一个 Activity 单独指定了 taskAffinity 值 "),a("code",[s._v("xxx")]),s._v("，当启动这个 Activity 时，系统会寻找一个 taskAffinity 值为 "),a("code",[s._v("xxx")]),s._v(" 的 TaskRecord，并将 Activity 对应的 ActivityRecord 对象插入栈顶。如果没有 taskAffinity 值为 "),a("code",[s._v("xxx")]),s._v(" 的 TaskRecord，则创建一个新的 TaskRecord")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240112150300.png",alt:"20240112150300"}})]),s._v(" "),a("p",[s._v("需要注意的是，在应用中使用 FLAG_ACTIVITY_NEW_TASK 标志去启动一个本应用中的一个 Activity，也不会创建一个新的 Task，除非这个 Activity 额外指定了不同的 taskAffinity 属性值。")]),s._v(" "),a("h2",{attrs:{id:"_2-3-activitystack"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-activitystack"}},[s._v("#")]),s._v(" 2.3 ActivityStack")]),s._v(" "),a("p",[s._v("ActivityStack 很容易与任务栈/返回栈混淆，实际的任务栈/返回栈是上面介绍的 TaskRecord。系统中可能同时有多个 TaskRecord，一般前台有一个 TaskRecord 和用户进行交互，而后台中可能有多个 TaskRecord 存在，前后台的 TaskRecord 可以进行切换，为了方便的管理这些 TaskRecord 而引入了 ActivityStack。")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityStack")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConfigurationContainer")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TaskRecord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" mTaskHistory "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityRecord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" mLRUActivities "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityRecord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" mNoAnimActivities "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//......")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("ActivityStack 用于管理 TaskRecord，ActivityStack 中维护了很多 ArrayList：")]),s._v(" "),a("ul",[a("li",[s._v("ArrayList"),a("TaskRecord",[s._v(" mTaskHistory：用于存储 TaskRecord，以栈的方式管理 TaskRecord")])],1),s._v(" "),a("li",[s._v("ArrayList"),a("ActivityRecord",[s._v(" mLRUActivities：正在运行的 Activity，列表中的第一个条目是最近最少使用的元素")])],1),s._v(" "),a("li",[s._v("ArrayList"),a("ActivityRecord",[s._v(" mNoAnimActivities：不考虑转换动画的 Activity")])],1)]),s._v(" "),a("p",[s._v("一般来说，一个 APP 对应一个 ActivityStack。")]),s._v(" "),a("h2",{attrs:{id:"_2-4-activitydisplay"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-activitydisplay"}},[s._v("#")]),s._v(" 2.4 ActivityDisplay")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityDisplay")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConfigurationContainer")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityStack")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WindowContainerListener")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" mDisplayId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Display")]),s._v(" mDisplay"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityStack")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" mStacks "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("ActivityDisplay 表示一个屏幕，Android 支持三种屏幕，主屏幕，外接屏幕，虚拟屏幕（投屏），一般在手机上只有主屏幕。 其内部成员 "),a("code",[s._v("ArrayList<ActivityStack> mStacks")]),s._v(" 用于保存当前显示屏可能会显示的所有 ActivityStack，同样以栈的方式管理这些 ActivityStack。")]),s._v(" "),a("h2",{attrs:{id:"_2-5-activitystacksupervisor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-activitystacksupervisor"}},[s._v("#")]),s._v(" 2.5 ActivityStackSupervisor")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityStackSupervisor")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RecentTasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Callbacks")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// .......")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RootActivityContainer")]),s._v(" mRootActivityContainer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RootActivityContainer")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConfigurationContainer")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DisplayManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("DisplayListener")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityDisplay")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" mActivityDisplays "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// .....")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("ActivityStackSupervisor 内部有一个 RootActivityContainer 成员，其内部有一个 "),a("code",[s._v("ArrayList<ActivityDisplay>")]),s._v(" 成员，用于管理多个显示设备，从而管理 ActivityStack，间接地管理着 TaskRecord。")]),s._v(" "),a("p",[s._v("这些类的整体结构如下：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240112152743.png",alt:"20240112152743"}})]),s._v(" "),a("p",[s._v("可以理解为一个屏幕上（大多数情况只有一个屏幕），会有很多个 APP 在运行，每个 APP 进程对应一个 ActivityStack，ActivityStack 内部又保存着多个 Activity 栈 TaskRecord，每个 TaskRecord 中包含着若干个 ActivityRecord。")]),s._v(" "),a("h2",{attrs:{id:"_3-使用命令行分析内部数据结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用命令行分析内部数据结构"}},[s._v("#")]),s._v(" 3. 使用命令行分析内部数据结构")]),s._v(" "),a("h3",{attrs:{id:"_3-1-launcher"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-launcher"}},[s._v("#")]),s._v(" 3.1 Launcher")]),s._v(" "),a("p",[s._v("模拟器重启后，处于 Launcher 时，运行命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("adb shell dumpsys activity\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("打印的内容很多，我们找到 activity 相关的内容：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ACTIVITY MANAGER ACTIVITIES "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dumpsys activity activities"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 代表手机主屏幕")]),s._v("\nDisplay "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0 (activities from top to bottom):")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Launcher App 对应的 ActivityStack")]),s._v("\n  Stack "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: type=home mode=fullscreen")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isSleeping")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    Task "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinWidth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLastNonFullscreenBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Launcher 中的 TaskRecord")]),s._v("\n    * TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("720a8a4 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2 I=com.android.launcher3/.Launcher U=0 StackId=0 sz=1}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("userId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("effectiveUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("u0a81 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mUserSetupComplete")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingPackage")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("intent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("act"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category."),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10000100 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mActivityComponent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autoRemoveRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isPersistable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("numFullscreen")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("activityType")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rootWasReset")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mNeverRelinquishIdentity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mReuseTask")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskAuth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("LOCK_TASK_AUTH_PINNABLE\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Stack 管理的 Activity 们")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Activities")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("6f00b94 u0 com.android.launcher3/.Launcher t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("askedCompatMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isAvailable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mRootProcess")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("9134f8 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2266")]),s._v(":com.android.launcher3/u0a81"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("hasBeenVisible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mResizeMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("RESIZE_MODE_RESIZEABLE "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mSupportsPictureInPicture")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isResizeable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lastActiveTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15681")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("inactive "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" 314s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        Hist "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{6f00b94 u0 com.android.launcher3/.Launcher t2}")]),s._v("\n          Intent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("act")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category."),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10000100 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("9134f8 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2266")]),s._v(":com.android.launcher3/u0a81"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ActivityRecord 信息")]),s._v("\n    Running activities "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("most recent first"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n      TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("720a8a4 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2 I=com.android.launcher3/.Launcher U=0 StackId=0 sz=1}")]),s._v("\n        Run "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{6f00b94 u0 com.android.launcher3/.Launcher t2}")]),s._v("\n\n    mResumedActivity: ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("6f00b94 u0 com.android.launcher3/.Launcher t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n ResumedActivity:ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("6f00b94 u0 com.android.launcher3/.Launcher t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  ResumedActivity: ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("6f00b94 u0 com.android.launcher3/.Launcher t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ActivityStackSupervisor 相关信息")]),s._v("\nActivityStackSupervisor state:\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("topDisplayFocusedStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("f11ab10 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("home "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("displayId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stacks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mHomeStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("f11ab10 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("home "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mPreferredTopFocusableStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("f11ab10 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("home "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLastFocusedStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("f11ab10 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("home "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCurTaskIdForUser")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mUserStackInFront")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isHomeRecentsComponent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true  KeyguardController:\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mKeyguardShowing")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mAodShowing")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mKeyguardGoingAway")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Occluded")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DismissingKeyguardActivity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null at "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("display")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mDismissalRequested")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mVisibilityTransactionDepth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  LockTaskController\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskModeState")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NONE\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskModeTasks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n    mLockTaskPackages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userId:packages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n      u0:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br")])]),a("p",[s._v("从打印的信息中可以分析出：")]),s._v(" "),a("ul",[a("li",[s._v("Display #0：当前处于 0 号显示器中")]),s._v(" "),a("li",[s._v("Stack #0：0 号显示器中有一个 0 号 ActivityStack")]),s._v(" "),a("li",[s._v("Task id #2： 0 号 ActivityStack 中有一个 2 号 TaskRecord")]),s._v(" "),a("li",[s._v("Activities=[ActivityRecord{6f00b94 u0 com.android.launcher3/.Launcher t2}]：2 号 TaskRecord 中又有一个一个 ActivityRecord，对应的 Activity 是 "),a("code",[s._v("com.android.launcher3")]),s._v(" 包下的 Launcher。")])]),s._v(" "),a("p",[s._v("相关数据结构关系如图：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240112154851.png",alt:"20240112154851"}})]),s._v(" "),a("h3",{attrs:{id:"_3-2-从-launcher-启动拨号-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-从-launcher-启动拨号-app"}},[s._v("#")]),s._v(" 3.2 从 Launcher 启动拨号 App")]),s._v(" "),a("p",[s._v("从 Launcher 启动拨号 App 后，再次执行命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("adb shell dumpsys activity\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("找到 activity 相关的内容：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ACTIVITY MANAGER ACTIVITIES "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dumpsys activity activities"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nDisplay "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0 (activities from top to bottom):")]),s._v("\n\n  Stack "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1: type=standard mode=fullscreen")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isSleeping")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    Task "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinWidth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLastNonFullscreenBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null\n    * TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("fffb022 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3 A=com.android.dialer U=0 StackId=1 sz=1}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("userId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("effectiveUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("u0a85 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("u0a81 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mUserSetupComplete")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingPackage")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("affinity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("intent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("act"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category.LAUNCHER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10200000 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pkg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer/.main.impl.MainActivity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mActivityComponent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer/.main.impl.MainActivity\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autoRemoveRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isPersistable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("numFullscreen")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("activityType")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rootWasReset")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mNeverRelinquishIdentity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mReuseTask")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskAuth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("LOCK_TASK_AUTH_PINNABLE\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Activities")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("93ecfba u0 com.android.dialer/.main.impl.MainActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("askedCompatMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isAvailable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mRootProcess")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6468658")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2372")]),s._v(":com.android.dialer/u0a85"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("hasBeenVisible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mResizeMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("RESIZE_MODE_RESIZEABLE "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mSupportsPictureInPicture")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isResizeable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lastActiveTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("190729")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("inactive "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" 2s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        Hist "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{93ecfba u0 com.android.dialer/.main.impl.MainActivity t3}")]),s._v("\n          Intent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("act")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category.LAUNCHER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10200000 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pkg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer/.main.impl.MainActivity "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bnds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20,602")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("130,725")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6468658")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2372")]),s._v(":com.android.dialer/u0a85"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    Running activities "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("most recent first"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n      TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("fffb022 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3 A=com.android.dialer U=0 StackId=1 sz=1}")]),s._v("\n        Run "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{93ecfba u0 com.android.dialer/.main.impl.MainActivity t3}")]),s._v("\n\n    mResumedActivity: ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("93ecfba u0 com.android.dialer/.main.impl.MainActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  Stack "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: type=home mode=fullscreen")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isSleeping")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    Task "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinWidth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLastNonFullscreenBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null\n    * TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("3d48ab3 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2 I=com.android.launcher3/.Launcher U=0 StackId=0 sz=1}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("userId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("effectiveUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("u0a81 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mUserSetupComplete")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingPackage")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("intent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("act"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category."),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10000100 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mActivityComponent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autoRemoveRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isPersistable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("numFullscreen")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("activityType")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rootWasReset")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mNeverRelinquishIdentity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mReuseTask")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskAuth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("LOCK_TASK_AUTH_PINNABLE\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Activities")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("4f321d u0 com.android.launcher3/.Launcher t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("askedCompatMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isAvailable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mRootProcess")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("74a2096 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2234")]),s._v(":com.android.launcher3/u0a81"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("hasBeenVisible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mResizeMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("RESIZE_MODE_RESIZEABLE "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mSupportsPictureInPicture")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isResizeable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lastActiveTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("190617")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("inactive "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" 2s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        Hist "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{4f321d u0 com.android.launcher3/.Launcher t2}")]),s._v("\n          Intent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("act")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category."),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10000100 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("74a2096 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2234")]),s._v(":com.android.launcher3/u0a81"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    Running activities "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("most recent first"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n      TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("3d48ab3 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2 I=com.android.launcher3/.Launcher U=0 StackId=0 sz=1}")]),s._v("\n        Run "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{4f321d u0 com.android.launcher3/.Launcher t2}")]),s._v("\n\n ResumedActivity:ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("93ecfba u0 com.android.dialer/.main.impl.MainActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  ResumedActivity: ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("93ecfba u0 com.android.dialer/.main.impl.MainActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nActivityStackSupervisor state:\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("topDisplayFocusedStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("2831f0f "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("standard "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("displayId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stacks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mHomeStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("9e4fb9c "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("home "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mPreferredTopFocusableStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("2831f0f "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("standard "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLastFocusedStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("2831f0f "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("standard "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCurTaskIdForUser")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mUserStackInFront")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isHomeRecentsComponent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true  KeyguardController:\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mKeyguardShowing")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mAodShowing")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mKeyguardGoingAway")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Occluded")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DismissingKeyguardActivity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null at "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("display")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mDismissalRequested")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mVisibilityTransactionDepth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  LockTaskController\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskModeState")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NONE\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskModeTasks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n    mLockTaskPackages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userId:packages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n      u0:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br")])]),a("p",[s._v("相关数据结构关系如图：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240112154917.png",alt:"20240112154917"}})]),s._v(" "),a("p",[s._v("在拨号主界面点击右上角三点，再点击 Call history 后，执行 "),a("code",[s._v("adb shell dumpsys activity")]),s._v(" 命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ACTIVITY MANAGER ACTIVITIES "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dumpsys activity activities"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nDisplay "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0 (activities from top to bottom):")]),s._v("\n\n  Stack "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1: type=standard mode=fullscreen")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isSleeping")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    Task "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinWidth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLastNonFullscreenBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null\n    * TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("fffb022 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3 A=com.android.dialer U=0 StackId=1 sz=2}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("userId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("effectiveUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("u0a85 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("u0a81 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mUserSetupComplete")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingPackage")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("affinity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("intent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("act"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category.LAUNCHER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10200000 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pkg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer/.main.impl.MainActivity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mActivityComponent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer/.main.impl.MainActivity\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autoRemoveRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isPersistable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("numFullscreen")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("activityType")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rootWasReset")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mNeverRelinquishIdentity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mReuseTask")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskAuth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("LOCK_TASK_AUTH_PINNABLE\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Activities")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("93ecfba u0 com.android.dialer/.main.impl.MainActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("a127424 u0 com.android.dialer/.app.calllog.CallLogActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("askedCompatMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isAvailable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mRootProcess")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6468658")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2372")]),s._v(":com.android.dialer/u0a85"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("hasBeenVisible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mResizeMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("RESIZE_MODE_RESIZEABLE "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mSupportsPictureInPicture")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isResizeable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lastActiveTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("316963")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("inactive "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" 8s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        Hist "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1: ActivityRecord{a127424 u0 com.android.dialer/.app.calllog.CallLogActivity t3}")]),s._v("\n          Intent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer/.app.calllog.CallLogActivity "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6468658")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2372")]),s._v(":com.android.dialer/u0a85"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        Hist "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{93ecfba u0 com.android.dialer/.main.impl.MainActivity t3}")]),s._v("\n          Intent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("act")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category.LAUNCHER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10200000 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pkg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer/.main.impl.MainActivity "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bnds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20,602")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("130,725")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6468658")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2372")]),s._v(":com.android.dialer/u0a85"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    Running activities "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("most recent first"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n      TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("fffb022 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3 A=com.android.dialer U=0 StackId=1 sz=2}")]),s._v("\n        Run "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1: ActivityRecord{a127424 u0 com.android.dialer/.app.calllog.CallLogActivity t3}")]),s._v("\n        Run "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{93ecfba u0 com.android.dialer/.main.impl.MainActivity t3}")]),s._v("\n\n    mResumedActivity: ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("a127424 u0 com.android.dialer/.app.calllog.CallLogActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  Stack "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: type=home mode=fullscreen")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isSleeping")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    Task "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinWidth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLastNonFullscreenBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null\n    * TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("3d48ab3 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2 I=com.android.launcher3/.Launcher U=0 StackId=0 sz=1}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("userId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("effectiveUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("u0a81 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mUserSetupComplete")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingPackage")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("intent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("act"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category."),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10000100 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mActivityComponent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autoRemoveRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isPersistable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("numFullscreen")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("activityType")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rootWasReset")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mNeverRelinquishIdentity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mReuseTask")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskAuth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("LOCK_TASK_AUTH_PINNABLE\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Activities")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("4f321d u0 com.android.launcher3/.Launcher t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("askedCompatMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isAvailable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mRootProcess")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("74a2096 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2234")]),s._v(":com.android.launcher3/u0a81"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("hasBeenVisible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mResizeMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("RESIZE_MODE_RESIZEABLE "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mSupportsPictureInPicture")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isResizeable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lastActiveTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("190617")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("inactive "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" 135s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        Hist "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{4f321d u0 com.android.launcher3/.Launcher t2}")]),s._v("\n          Intent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("act")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category."),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10000100 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("74a2096 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2234")]),s._v(":com.android.launcher3/u0a81"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    Running activities "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("most recent first"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n      TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("3d48ab3 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2 I=com.android.launcher3/.Launcher U=0 StackId=0 sz=1}")]),s._v("\n        Run "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{4f321d u0 com.android.launcher3/.Launcher t2}")]),s._v("\n\n ResumedActivity:ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("a127424 u0 com.android.dialer/.app.calllog.CallLogActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  ResumedActivity: ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("a127424 u0 com.android.dialer/.app.calllog.CallLogActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nActivityStackSupervisor state:\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("topDisplayFocusedStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("2831f0f "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("standard "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("displayId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stacks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mHomeStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("9e4fb9c "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("home "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mPreferredTopFocusableStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("2831f0f "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("standard "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLastFocusedStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("2831f0f "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("standard "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCurTaskIdForUser")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mUserStackInFront")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isHomeRecentsComponent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true  KeyguardController:\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mKeyguardShowing")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mAodShowing")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mKeyguardGoingAway")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Occluded")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DismissingKeyguardActivity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null at "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("display")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mDismissalRequested")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mVisibilityTransactionDepth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  LockTaskController\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskModeState")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NONE\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskModeTasks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n    mLockTaskPackages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userId:packages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n      u0:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br")])]),a("p",[s._v("相关数据结构关系如图：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240112155109.png",alt:"20240112155109"}})]),s._v(" "),a("h2",{attrs:{id:"_4-总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-总结"}},[s._v("#")]),s._v(" 4. 总结")]),s._v(" "),a("p",[s._v("本文主要介绍了")]),s._v(" "),a("ul",[a("li",[s._v("Android 中 Task 的概念")]),s._v(" "),a("li",[s._v("管理 Activity 的数据结构，包括了 ActivityRecord TaskRecord ActivityStack ActivityDisplay ActivityStackSupervisor")]),s._v(" "),a("li",[s._v("使用命令行查看内部数据结构情况")])]),s._v(" "),a("h2",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://developer.android.google.cn/guide/components/activities/tasks-and-back-stack?hl=zh-cn",target:"_blank",rel:"noopener noreferrer"}},[s._v("任务和返回堆栈"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/590572603",target:"_blank",rel:"noopener noreferrer"}},[s._v("Android的Task管理"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/liuwg1226/article/details/110391661",target:"_blank",rel:"noopener noreferrer"}},[s._v("Android四大组件系列1 AMS相关数据结构"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/hejnhong/article/details/127477444",target:"_blank",rel:"noopener noreferrer"}},[s._v("AMS：ActivityRecord 理解"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://blog.csdn.net/tkwxty/article/details/108680198",target:"_blank",rel:"noopener noreferrer"}},[s._v("Activity启动流程(一)发起端进程请求启动目标Activity"),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);