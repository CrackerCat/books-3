(window.webpackJsonp=window.webpackJsonp||[]).push([[208],{636:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("本文基于 android-10.0.0_r41 版本讲解")]),s._v(" "),a("p",[s._v("英文缩写说明：")]),s._v(" "),a("ul",[a("li",[s._v("AMS：ActivityManagerService")]),s._v(" "),a("li",[s._v("ATMS：ActivityTaskManagerService")])]),s._v(" "),a("p",[s._v("所有的 Android 应用程序都是由 Zygote 进程 fork 而来，在 Zygote 进程中初始化了 Java 运行时，加载了常用的 Java Classes，加载了系统资源等。这些底层基础都会被 Android 应用程序继承。")]),s._v(" "),a("p",[s._v("在从 Zygote 中继承的通用基础环境之上，Android 在 Java 层弱化了进程的概念，建立了四大组件及其配套框架。")]),s._v(" "),a("p",[s._v("这套框架中最核心的组件就是 AMS，在 Android10 中，AMS 的部分功能迁移到了 ATMS。")]),s._v(" "),a("p",[s._v("接下来我们通过分析四大组件的启动过程来了解 AMS/ATMS 的内部实现。")]),s._v(" "),a("p",[s._v("我们首先分析 Activity 的启动过程，Activity 主要由 ATMS 管理。")]),s._v(" "),a("h2",{attrs:{id:"atms-整体框架分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#atms-整体框架分析"}},[s._v("#")]),s._v(" ATMS 整体框架分析")]),s._v(" "),a("p",[s._v("首先明确 ATMS 是一个运行在 SystemServer 中的 Java Binder 服务。其主要作用是向 App 提供管理 Activity 的接口：")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("startActivity\nfinishActivity\nactivityResumed\nactivityPaused\nactivityStopped\nactivityDestroyed\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("ATMS 通过 AIDL 实现，相关类的类图如下：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240103154533.png",alt:"20240103154533"}})]),s._v(" "),a("p",[s._v("App 可以通过 Binder RPC 调用到 ATMS 提供的接口来管理和操作 Activity：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240103154438.png",alt:"20240103154438"}})]),s._v(" "),a("p",[s._v("在 App 进程启动的过程中，会启动一个匿名 Binder 服务 ApplicationThread，ATMS 可以通过调用 ApplicationThread 提供的接口，向 App 进程通知 App 的状态：")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[s._v("bindApplication\nscheduleTransaction\nscheduleLowMemory\nscheduleSleeping\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//......")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("ApplicationThread 同样基于 AIDL 实现，相关类的类图如下：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240103154559.png",alt:"20240103154559"}})]),s._v(" "),a("p",[s._v("ATMS 相关的 RPC 调用关系图如下：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240103154631.png",alt:"20240103154631"}})]),s._v(" "),a("h2",{attrs:{id:"atms-相关核心数据结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#atms-相关核心数据结构"}},[s._v("#")]),s._v(" ATMS 相关核心数据结构")]),s._v(" "),a("p",[s._v("所谓的 Activity 的管理，笼统地说，就是通过内部一堆数据结构的增删改查来实现的，接下来我们就来一一分析 ATMS 相关的核心数据结构。")]),s._v(" "),a("p",[a("strong",[s._v("ProcessRecord")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ProcessRecord")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WindowProcessListener")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityManagerService")]),s._v(" mService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// where we came from")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ApplicationInfo")]),s._v(" info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// all about the first app in the process")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" isolated"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// true if this is a special isolated process")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" appZygote"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// true if this is forked from the app zygote")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" uid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("              "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// uid of process; may be different from 'info' if isolated")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" userId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// user of process.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" processName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// name of the process")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" pid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// The process of this application; 0 if none")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" procStatFile"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// path to /proc/<pid>/stat")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" gids"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("                 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// The gids this process was launched with")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("ProcessRecord 是 Android Framework Java 层用于描述进程的数据结构。四大组件 （Activity,Service, BroadcastReceiver, ContentProvider）定义在AndroidManifest.xml文件， 每一项都可以用属性android:process指定所运行的进程。同一个app可以运行在通过一个进程，也可以运行在多个进程， 甚至多个app可以共享同一个进程。")]),s._v(" "),a("p",[a("strong",[s._v("ActivityRecord")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// frameworks/base/services/core/java/com/android/server/wm/ActivityRecord.java")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityRecord")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConfigurationContainer")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TaskRecord")]),s._v(" task"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// the task this is in.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" launchedFromPid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// always the pid who started the activity.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("ActivityRecord 用于记录一个 Activity 对象相关的信息,与应用中的 Activity 实例一一对应。每个 ActivityRecord 会对应到一个 TaskRecord，ActivityRecord 中类型为 TaskRecord 的成员 task，记录所属的 Task。需要注意的是 Activity 和 ActivityRecord 并不是一对一的，而是一对多，因为一个 Actitiy 可能被启动多次，存在多个 Actitiy 对象，进而导致存在多个对应的 ActivityRecord.")]),s._v(" "),a("p",[s._v("ActivityRecord 内部成员 launchedFromPid 用于指定启动 Activity 的进程 pid，通过这个变量与一个 ProcessRecord 对象相关联。")]),s._v(" "),a("p",[s._v("startActivity() 时会创建一个 ActivityRecord：")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// frameworks/base/services/core/java/com/android/server/wm/ActivityStarter.java")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("startActivity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IApplicationThread")]),s._v(" caller"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Intent")]),s._v(" intent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Intent")]),s._v(" ephemeralIntent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" resolvedType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityInfo")]),s._v(" aInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ResolveInfo")]),s._v(" rInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IVoiceInteractionSession")]),s._v(" voiceSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IVoiceInteractor")]),s._v(" voiceInteractor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IBinder")]),s._v(" resultTo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" resultWho"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" requestCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" callingPid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" callingUid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" callingPackage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" realCallingPid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" realCallingUid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" startFlags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("SafeActivityOptions")]),s._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" ignoreTargetSecurity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" componentSpecified"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityRecord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" outActivity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TaskRecord")]),s._v(" inTask"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" allowPendingRemoteAnimationRegistryLookup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("PendingIntentRecord")]),s._v(" originatingPendingIntent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" allowBackgroundActivityStart"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityRecord")]),s._v(" r "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityRecord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" callerApp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" callingPid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" callingUid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                callingPackage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" intent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" resolvedType"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" aInfo"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getGlobalConfiguration")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                resultRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" resultWho"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" requestCode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" componentSpecified"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" voiceSession "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                mSupervisor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" checkedOptions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" sourceRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("    \n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//......")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("p",[a("strong",[s._v("TaskRecord")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// frameworks/base/services/core/java/com/android/server/wm/TaskRecord.java")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TaskRecord")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConfigurationContainer")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//任务ID")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" taskId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("       "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// Unique identifier for this task.")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 使用一个ArrayList来保存所有的ActivityRecord")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** List of all activities in the task arranged in history order */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityRecord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" mActivities"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// TaskRecord 所在的 ActivityStack")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/** Current stack. Setter must always be used to update the value. */")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityStack")]),s._v(" mStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 构造函数")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TaskRecord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityTaskManagerService")]),s._v(" service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" _taskId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityInfo")]),s._v(" info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Intent")]),s._v(" _intent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IVoiceInteractionSession")]),s._v(" _voiceSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IVoiceInteractor")]),s._v(" _voiceInteractor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 添加 Activity 到顶部")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("addActivityToTop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityRecord")]),s._v(" r"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("addActivityAtIndex")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mActivities"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("size")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" r"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//添加Activity到指定的索引位置")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("addActivityAtIndex")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityRecord")]),s._v(" r"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//...")]),s._v("\n        r"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTask")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//为ActivityRecord设置TaskRecord，就是这里建立的联系")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//...")]),s._v("\n        index "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Math")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("min")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        mActivities"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("index"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" r"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//添加到mActivities")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//...")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("p",[s._v("TaskRecord 内部维护了一个 "),a("code",[s._v("ArrayList<ActivityRecord>")]),s._v(" 用于保存 ActivityRecord，这就是"),a("a",{attrs:{href:"https://developer.android.google.cn/guide/components/activities/tasks-and-back-stack?hl=zh-cn",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),a("OutboundLink")],1),s._v("中说的任务栈，具有后进后出的特点。")]),s._v(" "),a("p",[s._v("在启动 Activity 的过程中会创建 TaskRecord 对象，这也很好理解，ActivityRecord 依存于 TaskRecord。")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("startActivityUnchecked")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityRecord")]),s._v(" r"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityRecord")]),s._v(" sourceRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IVoiceInteractionSession")]),s._v(" voiceSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IVoiceInteractor")]),s._v(" voiceInteractor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" startFlags"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" doResume"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityOptions")]),s._v(" options"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TaskRecord")]),s._v(" inTask"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityRecord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" outActivity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" restrictedBgActivity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mStartActivity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("resultTo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" mInTask "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("mAddingToTask\n                "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mLaunchFlags "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("FLAG_ACTIVITY_NEW_TASK")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            newTask "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n            result "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTaskFromReuseOrCreateNewTask")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("taskToAffiliate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("     \n\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("setTaskFromReuseOrCreateNewTask")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TaskRecord")]),s._v(" taskToAffiliate"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TaskRecord")]),s._v(" task "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" mTargetStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("createTaskRecord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("\n                    mSupervisor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("getNextTaskIdForUserLocked")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("mStartActivity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("mUserId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    mNewTaskInfo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" mNewTaskInfo "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" mStartActivity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("info"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    mNewTaskIntent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("null")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" mNewTaskIntent "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" mIntent"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mVoiceSession"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n                    mVoiceInteractor"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" toTop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mStartActivity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mSourceRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" mOptions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("p",[a("strong",[s._v("ActivityStack")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityStack")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConfigurationContainer")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("TaskRecord")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" mTaskHistory "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//......")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("ActivityStack 很容易与任务栈混淆，实际的任务栈是上面介绍的 TaskRecord。系统中可能同时有多个 TaskRecord，一般前台有一个 TaskRecord 和用户进行交互，而后台中可能有多个 TaskRecord 存在，前后台的 TaskRecord 可以进行切换，为了方便的管理这些 TaskRecord 而引入了 ActivityStack。")]),s._v(" "),a("p",[s._v("ActivityStack 用于管理 TaskRecord，它有一个 ArrayList 类型的成员 mTaskHistory，用于存储 TaskRecord")]),s._v(" "),a("p",[s._v("一般来说，一个 APP 对应一个 ActivityStack。")]),s._v(" "),a("p",[a("strong",[s._v("ActivityDisplay")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityDisplay")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConfigurationContainer")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityStack")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("WindowContainerListener")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" mDisplayId"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Display")]),s._v(" mDisplay"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityStack")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" mStacks "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("ActivityDisplay 表示一个屏幕，Android 支持三种屏幕，主屏幕，外接屏幕，虚拟屏幕（投屏），一般在手机上只有主屏幕。 其内部成员 "),a("code",[s._v("ArrayList<ActivityStack> mStacks")]),s._v(" 用于保存当前显示屏可能会显示的所有 ActivityStack。")]),s._v(" "),a("p",[a("strong",[s._v("ActivityStackSupervisor")])]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityStackSupervisor")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RecentTasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("Callbacks")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// .......")]),s._v("\n\n        "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RootActivityContainer")]),s._v(" mRootActivityContainer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        \n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RootActivityContainer")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("extends")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ConfigurationContainer")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("implements")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("DisplayManager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("DisplayListener")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ......")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("final")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ActivityDisplay")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),s._v(" mActivityDisplays "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ArrayList")]),a("span",{pre:!0,attrs:{class:"token generics"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(">")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// .....")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("ActivityStackSupervisor 内部有一个 RootActivityContainer 成员，其内部有一个 "),a("code",[s._v("ArrayList<ActivityDisplay>")]),s._v(" 成员，用于管理多个显示设备，从而管理 ActivityStack，间接的管理着 TaskRecord。")]),s._v(" "),a("p",[s._v("这些类的整体结构如下：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240103154757.png",alt:"20240103154757"}})]),s._v(" "),a("p",[s._v("可以理解为一个屏幕上，会有很多个 APP 在运行，每个 APP 进程对应一个 ActivityStack，ActivityStack 内部又保存着多个 Activity 栈 TaskRecord，每个 TaskRecord 中包含着若干个 ActivityRecord。")]),s._v(" "),a("h2",{attrs:{id:"场景分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#场景分析"}},[s._v("#")]),s._v(" 场景分析")]),s._v(" "),a("h3",{attrs:{id:"launcher"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#launcher"}},[s._v("#")]),s._v(" Launcher")]),s._v(" "),a("p",[s._v("模拟器重启后，处于 Launcher 时，运行命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("adb shell dumpsys activity\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("打印的内容很多，我们找到 activity 相关的内容：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ACTIVITY MANAGER ACTIVITIES "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dumpsys activity activities"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 代表手机主屏幕")]),s._v("\nDisplay "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0 (activities from top to bottom):")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Launcher App 对应的 ActivityStack")]),s._v("\n  Stack "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: type=home mode=fullscreen")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isSleeping")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    Task "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinWidth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLastNonFullscreenBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Launcher 中的 TaskRecord")]),s._v("\n    * TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("720a8a4 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2 I=com.android.launcher3/.Launcher U=0 StackId=0 sz=1}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("userId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("effectiveUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("u0a81 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mUserSetupComplete")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingPackage")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("intent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("act"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category."),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10000100 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mActivityComponent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autoRemoveRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isPersistable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("numFullscreen")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("activityType")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rootWasReset")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mNeverRelinquishIdentity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mReuseTask")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskAuth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("LOCK_TASK_AUTH_PINNABLE\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Stack 管理的 Activity 们")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Activities")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("6f00b94 u0 com.android.launcher3/.Launcher t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("askedCompatMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isAvailable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mRootProcess")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("9134f8 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2266")]),s._v(":com.android.launcher3/u0a81"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("hasBeenVisible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mResizeMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("RESIZE_MODE_RESIZEABLE "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mSupportsPictureInPicture")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isResizeable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lastActiveTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15681")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("inactive "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" 314s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        Hist "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{6f00b94 u0 com.android.launcher3/.Launcher t2}")]),s._v("\n          Intent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("act")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category."),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10000100 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("9134f8 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2266")]),s._v(":com.android.launcher3/u0a81"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ActivityRecord 信息")]),s._v("\n    Running activities "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("most recent first"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n      TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("720a8a4 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2 I=com.android.launcher3/.Launcher U=0 StackId=0 sz=1}")]),s._v("\n        Run "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{6f00b94 u0 com.android.launcher3/.Launcher t2}")]),s._v("\n\n    mResumedActivity: ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("6f00b94 u0 com.android.launcher3/.Launcher t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n ResumedActivity:ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("6f00b94 u0 com.android.launcher3/.Launcher t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  ResumedActivity: ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("6f00b94 u0 com.android.launcher3/.Launcher t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ActivityStackSupervisor 相关信息")]),s._v("\nActivityStackSupervisor state:\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("topDisplayFocusedStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("f11ab10 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("home "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("displayId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stacks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mHomeStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("f11ab10 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("home "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mPreferredTopFocusableStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("f11ab10 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("home "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLastFocusedStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("f11ab10 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("home "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCurTaskIdForUser")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mUserStackInFront")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isHomeRecentsComponent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true  KeyguardController:\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mKeyguardShowing")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mAodShowing")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mKeyguardGoingAway")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Occluded")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DismissingKeyguardActivity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null at "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("display")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mDismissalRequested")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mVisibilityTransactionDepth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  LockTaskController\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskModeState")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NONE\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskModeTasks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n    mLockTaskPackages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userId:packages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n      u0:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br")])]),a("p",[s._v("相关数据结构关系如图：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240103154932.png",alt:"20240103154932"}})]),s._v(" "),a("h3",{attrs:{id:"从-launcher-启动拨号-app"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从-launcher-启动拨号-app"}},[s._v("#")]),s._v(" 从 Launcher 启动拨号 App")]),s._v(" "),a("p",[s._v("从 Launcher 启动拨号 App 后，再次执行命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("adb shell dumpsys activity\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("找到 activity 相关的内容：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ACTIVITY MANAGER ACTIVITIES "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dumpsys activity activities"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nDisplay "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0 (activities from top to bottom):")]),s._v("\n\n  Stack "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1: type=standard mode=fullscreen")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isSleeping")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    Task "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinWidth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLastNonFullscreenBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null\n    * TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("fffb022 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3 A=com.android.dialer U=0 StackId=1 sz=1}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("userId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("effectiveUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("u0a85 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("u0a81 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mUserSetupComplete")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingPackage")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("affinity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("intent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("act"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category.LAUNCHER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10200000 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pkg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer/.main.impl.MainActivity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mActivityComponent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer/.main.impl.MainActivity\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autoRemoveRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isPersistable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("numFullscreen")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("activityType")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rootWasReset")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mNeverRelinquishIdentity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mReuseTask")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskAuth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("LOCK_TASK_AUTH_PINNABLE\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Activities")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("93ecfba u0 com.android.dialer/.main.impl.MainActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("askedCompatMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isAvailable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mRootProcess")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6468658")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2372")]),s._v(":com.android.dialer/u0a85"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("hasBeenVisible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mResizeMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("RESIZE_MODE_RESIZEABLE "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mSupportsPictureInPicture")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isResizeable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lastActiveTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("190729")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("inactive "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" 2s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        Hist "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{93ecfba u0 com.android.dialer/.main.impl.MainActivity t3}")]),s._v("\n          Intent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("act")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category.LAUNCHER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10200000 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pkg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer/.main.impl.MainActivity "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bnds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20,602")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("130,725")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6468658")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2372")]),s._v(":com.android.dialer/u0a85"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    Running activities "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("most recent first"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n      TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("fffb022 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3 A=com.android.dialer U=0 StackId=1 sz=1}")]),s._v("\n        Run "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{93ecfba u0 com.android.dialer/.main.impl.MainActivity t3}")]),s._v("\n\n    mResumedActivity: ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("93ecfba u0 com.android.dialer/.main.impl.MainActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  Stack "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: type=home mode=fullscreen")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isSleeping")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    Task "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinWidth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLastNonFullscreenBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null\n    * TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("3d48ab3 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2 I=com.android.launcher3/.Launcher U=0 StackId=0 sz=1}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("userId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("effectiveUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("u0a81 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mUserSetupComplete")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingPackage")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("intent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("act"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category."),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10000100 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mActivityComponent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autoRemoveRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isPersistable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("numFullscreen")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("activityType")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rootWasReset")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mNeverRelinquishIdentity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mReuseTask")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskAuth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("LOCK_TASK_AUTH_PINNABLE\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Activities")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("4f321d u0 com.android.launcher3/.Launcher t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("askedCompatMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isAvailable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mRootProcess")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("74a2096 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2234")]),s._v(":com.android.launcher3/u0a81"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("hasBeenVisible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mResizeMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("RESIZE_MODE_RESIZEABLE "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mSupportsPictureInPicture")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isResizeable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lastActiveTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("190617")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("inactive "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" 2s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        Hist "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{4f321d u0 com.android.launcher3/.Launcher t2}")]),s._v("\n          Intent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("act")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category."),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10000100 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("74a2096 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2234")]),s._v(":com.android.launcher3/u0a81"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    Running activities "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("most recent first"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n      TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("3d48ab3 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2 I=com.android.launcher3/.Launcher U=0 StackId=0 sz=1}")]),s._v("\n        Run "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{4f321d u0 com.android.launcher3/.Launcher t2}")]),s._v("\n\n ResumedActivity:ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("93ecfba u0 com.android.dialer/.main.impl.MainActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  ResumedActivity: ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("93ecfba u0 com.android.dialer/.main.impl.MainActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nActivityStackSupervisor state:\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("topDisplayFocusedStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("2831f0f "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("standard "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("displayId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stacks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mHomeStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("9e4fb9c "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("home "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mPreferredTopFocusableStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("2831f0f "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("standard "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLastFocusedStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("2831f0f "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("standard "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCurTaskIdForUser")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mUserStackInFront")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isHomeRecentsComponent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true  KeyguardController:\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mKeyguardShowing")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mAodShowing")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mKeyguardGoingAway")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Occluded")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DismissingKeyguardActivity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null at "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("display")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mDismissalRequested")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mVisibilityTransactionDepth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  LockTaskController\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskModeState")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NONE\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskModeTasks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n    mLockTaskPackages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userId:packages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n      u0:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br")])]),a("p",[s._v("相关数据结构关系如图：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240103154956.png",alt:"20240103154956"}})]),s._v(" "),a("p",[s._v("点击右上角三点中的 Call history 后，再执行 "),a("code",[s._v("adb shell dumpsys activity")]),s._v(" 命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("ACTIVITY MANAGER ACTIVITIES "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dumpsys activity activities"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nDisplay "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0 (activities from top to bottom):")]),s._v("\n\n  Stack "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1: type=standard mode=fullscreen")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isSleeping")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    Task "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinWidth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLastNonFullscreenBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null\n    * TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("fffb022 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3 A=com.android.dialer U=0 StackId=1 sz=2}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("userId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("effectiveUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("u0a85 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("u0a81 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mUserSetupComplete")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingPackage")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("affinity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("intent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("act"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category.LAUNCHER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10200000 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pkg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer/.main.impl.MainActivity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mActivityComponent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer/.main.impl.MainActivity\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autoRemoveRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isPersistable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("numFullscreen")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("activityType")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rootWasReset")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mNeverRelinquishIdentity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mReuseTask")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskAuth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("LOCK_TASK_AUTH_PINNABLE\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Activities")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("93ecfba u0 com.android.dialer/.main.impl.MainActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("a127424 u0 com.android.dialer/.app.calllog.CallLogActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("askedCompatMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isAvailable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mRootProcess")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6468658")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2372")]),s._v(":com.android.dialer/u0a85"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("hasBeenVisible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mResizeMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("RESIZE_MODE_RESIZEABLE "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mSupportsPictureInPicture")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isResizeable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lastActiveTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("316963")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("inactive "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" 8s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        Hist "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1: ActivityRecord{a127424 u0 com.android.dialer/.app.calllog.CallLogActivity t3}")]),s._v("\n          Intent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer/.app.calllog.CallLogActivity "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6468658")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2372")]),s._v(":com.android.dialer/u0a85"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n        Hist "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{93ecfba u0 com.android.dialer/.main.impl.MainActivity t3}")]),s._v("\n          Intent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("act")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category.LAUNCHER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10200000 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("pkg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.dialer/.main.impl.MainActivity "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("bnds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("20,602")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("130,725")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6468658")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2372")]),s._v(":com.android.dialer/u0a85"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    Running activities "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("most recent first"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n      TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("fffb022 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#3 A=com.android.dialer U=0 StackId=1 sz=2}")]),s._v("\n        Run "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#1: ActivityRecord{a127424 u0 com.android.dialer/.app.calllog.CallLogActivity t3}")]),s._v("\n        Run "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{93ecfba u0 com.android.dialer/.main.impl.MainActivity t3}")]),s._v("\n\n    mResumedActivity: ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("a127424 u0 com.android.dialer/.app.calllog.CallLogActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  Stack "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: type=home mode=fullscreen")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isSleeping")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    Task "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("Rect"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(", "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinWidth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mMinHeight")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLastNonFullscreenBounds")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null\n    * TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("3d48ab3 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2 I=com.android.launcher3/.Launcher U=0 StackId=0 sz=1}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("userId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("effectiveUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("u0a81 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingUid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mUserSetupComplete")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCallingPackage")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("intent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("act"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category."),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10000100 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mActivityComponent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("autoRemoveRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isPersistable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("numFullscreen")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("activityType")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("rootWasReset")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mNeverRelinquishIdentity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mReuseTask")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskAuth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("LOCK_TASK_AUTH_PINNABLE\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Activities")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("4f321d u0 com.android.launcher3/.Launcher t2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("askedCompatMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("inRecents")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isAvailable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mRootProcess")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("74a2096 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2234")]),s._v(":com.android.launcher3/u0a81"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("hasBeenVisible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mResizeMode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("RESIZE_MODE_RESIZEABLE "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mSupportsPictureInPicture")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isResizeable")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lastActiveTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("190617")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("inactive "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" 135s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        Hist "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{4f321d u0 com.android.launcher3/.Launcher t2}")]),s._v("\n          Intent "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("act")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("android.intent.action.MAIN "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cat")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("android.intent.category."),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HOME")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flg")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("0x10000100 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cmp")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("com.android.launcher3/.Launcher "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n          ProcessRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("74a2096 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2234")]),s._v(":com.android.launcher3/u0a81"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    Running activities "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("most recent first"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":\n      TaskRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("3d48ab3 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#2 I=com.android.launcher3/.Launcher U=0 StackId=0 sz=1}")]),s._v("\n        Run "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#0: ActivityRecord{4f321d u0 com.android.launcher3/.Launcher t2}")]),s._v("\n\n ResumedActivity:ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("a127424 u0 com.android.dialer/.app.calllog.CallLogActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n  ResumedActivity: ActivityRecord"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("a127424 u0 com.android.dialer/.app.calllog.CallLogActivity t3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nActivityStackSupervisor state:\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("topDisplayFocusedStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("2831f0f "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("standard "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("displayId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stacks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mHomeStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("9e4fb9c "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("home "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mPreferredTopFocusableStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("2831f0f "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("standard "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLastFocusedStack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ActivityStack"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("2831f0f "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("stackId")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("type")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("standard "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mode")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("fullscreen "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("visible")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("translucent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false, "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" tasks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mCurTaskIdForUser")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mUserStackInFront")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n  "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("isHomeRecentsComponent")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true  KeyguardController:\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mKeyguardShowing")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mAodShowing")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mKeyguardGoingAway")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Occluded")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DismissingKeyguardActivity")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("null at "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("display")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mDismissalRequested")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("false\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mVisibilityTransactionDepth")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  LockTaskController\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskModeState")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NONE\n    "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("mLockTaskModeTasks")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n    mLockTaskPackages "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userId:packages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n      u0:"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br")])]),a("p",[s._v("相关数据结构关系如图：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/stingerzou/MyImages@main/images20240103155014.png",alt:"20240103155014"}})]),s._v(" "),a("h2",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[s._v("#")]),s._v(" 参考资料")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://blog.csdn.net/tkwxty/article/details/108652250",target:"_blank",rel:"noopener noreferrer"}},[s._v("Android四大组件之Activity启动流程源码实现详解概要"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://juejin.cn/post/6856298463119409165",target:"_blank",rel:"noopener noreferrer"}},[s._v("深入理解ActivityRecord、TaskRecord、ActivityStack的作用及关系"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://developer.android.google.cn/guide/components/activities/tasks-and-back-stack?hl=zh-cn",target:"_blank",rel:"noopener noreferrer"}},[s._v("了解任务和返回堆栈"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.jianshu.com/p/94816e52cd77",target:"_blank",rel:"noopener noreferrer"}},[s._v("ActivityRecord、TaskRecord、ActivityStack以及Activity启动模式详解"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/fanglongxiang/p/13670328.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("Android10_原理机制系列_AMS(ATMS)之应用的第一次启动的过程 "),a("OutboundLink")],1)])])])}),[],!1,null,null,null);a.default=e.exports}}]);